
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Marwana Bin Mano</title>
    <link rel="stylesheet" href="admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Admin Header -->
    <header class="admin-header">
        <div class="container">
            <div class="admin-nav">
                <div class="logo">
                    <i class="fas fa-camera-retro"></i>
                    <h1>Marwana Bin Mano - Admin</h1>
                </div>
                <nav>
                    <a href="#" id="dashboard-link" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                    <a href="#" id="folders-link"><i class="fas fa-folder"></i> Folders</a>
                    <a href="#" id="pictures-link"><i class="fas fa-image"></i> Pictures</a>
                </nav>
                <div class="auth-buttons">
                    <button class="btn btn-secondary" id="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                    <a href="index.html" class="btn btn-primary">
                        <i class="fas fa-eye"></i> View Site
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Admin Content -->
    <main>
        <div class="container">
            <!-- Dashboard Section -->
            <section class="dashboard-section active" id="dashboard-section">
                <h2 class="page-title">Admin Dashboard</h2>
                
                <!-- Stats -->
                <div class="stats-container">
                    <div class="stat-card">
                        <i class="fas fa-folder"></i>
                        <h3 id="total-folders">0</h3>
                        <p>Total Folders</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-image"></i>
                        <h3 id="total-pictures">0</h3>
                        <p>Total Pictures</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-money-bill-wave"></i>
                        <h3 id="total-value">0 CFA</h3>
                        <p>Total Value</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-upload"></i>
                        <h3>Ready</h3>
                        <p>Mobile Upload</p>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="admin-actions">
                    <button class="btn btn-primary" id="add-folder-btn">
                        <i class="fas fa-plus"></i> Add New Folder
                    </button>
                    <button class="btn btn-success" id="add-picture-btn">
                        <i class="fas fa-plus"></i> Add New Picture
                    </button>
                    <button class="btn btn-warning" id="upload-guide-btn">
                        <i class="fas fa-question-circle"></i> Upload Guide
                    </button>
                    <button class="btn btn-secondary" id="reset-sample-btn">
                        <i class="fas fa-redo"></i> Reset Sample Data
                    </button>
                </div>
                
                <!-- Recent Activity -->
                <div class="table-container">
                    <div class="table-header">
                        <h3>Recent Pictures</h3>
                        <span class="badge" id="recent-count">0 recent</span>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Title</th>
                                <th>Folder</th>
                                <th>Price</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="recent-pictures-table">
                            <tr>
                                <td colspan="5" style="text-align: center; padding: 3rem; color: #999;">
                                    No recent pictures. Add some pictures to see them here.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Folders Management Section -->
            <section class="dashboard-section" id="folders-section">
                <h2 class="page-title">Manage Folders</h2>
                
                <!-- Add/Edit Folder Form -->
                <div class="form-container">
                    <div class="form-header">
                        <h3 id="folder-form-title">Add New Folder</h3>
                        <p>Create folders to organize your pictures</p>
                    </div>
                    <div class="form-body">
                        <form id="folder-form">
                            <input type="hidden" id="folder-id" value="">
                            <div class="form-group">
                                <label for="folder-title">Folder Title *</label>
                                <input type="text" id="folder-title" required placeholder="Enter folder name">
                            </div>
                            <div class="form-group">
                                <label for="folder-icon">Folder Icon (FontAwesome class) *</label>
                                <div class="icon-input">
                                    <input type="text" id="folder-icon" value="fas fa-folder" required placeholder="fas fa-folder">
                                    <div class="icon-preview">
                                        <i id="icon-preview" class="fas fa-folder"></i>
                                    </div>
                                </div>
                                <small class="form-hint">
                                    Examples: fas fa-folder, fas fa-image, fas fa-city, fas fa-tree, fas fa-mountain
                                </small>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary btn-block">
                                    <i class="fas fa-save"></i> Save Folder
                                </button>
                                <button type="button" class="btn btn-secondary" id="cancel-folder-edit" style="display: none;">
                                    Cancel Edit
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- Folders Table -->
                <div class="table-container">
                    <div class="table-header">
                        <h3>All Folders</h3>
                        <span class="badge" id="folders-count">0 folders</span>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Folder</th>
                                <th>Pictures</th>
                                <th>Created</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="folders-table">
                            <tr>
                                <td colspan="5" style="text-align: center; padding: 3rem; color: #999;">
                                    No folders created yet. Create your first folder above.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Pictures Management Section -->
            <section class="dashboard-section" id="pictures-section">
                <h2 class="page-title">Manage Pictures</h2>
                
                <!-- Add/Edit Picture Form -->
                <div class="form-container">
                    <div class="form-header">
                        <h3 id="picture-form-title">Add New Picture</h3>
                        <p>Upload images directly from your phone or computer</p>
                    </div>
                    <div class="form-body">
                        <form id="picture-form">
                            <input type="hidden" id="picture-id" value="">
                            <div class="form-group">
                                <label for="picture-title">Picture Title *</label>
                                <input type="text" id="picture-title" required placeholder="Enter picture title">
                            </div>
                            <div class="form-group">
                                <label for="picture-description">Description *</label>
                                <textarea id="picture-description" rows="3" required placeholder="Describe this picture"></textarea>
                            </div>
                            
                            <!-- File Upload Section -->
                            <div class="form-group">
                                <label for="picture-file">Upload Image *</label>
                                <div class="file-upload-container">
                                    <input type="file" id="picture-file" accept="image/*" required>
                                    <div class="file-preview" id="image-preview">
                                        <div class="upload-icon">
                                            <i class="fas fa-cloud-upload-alt"></i>
                                        </div>
                                        <div class="upload-text">
                                            <p>Click or tap to select image</p>
                                            <small>Supports JPG, PNG, GIF, WebP (Max 10MB)</small>
                                        </div>
                                        <div class="upload-hint">
                                            <i class="fas fa-mobile-alt"></i> Works great on mobile!
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="picture-price">Price (CFA) *</label>
                                    <div class="price-input">
                                        <input type="number" id="picture-price" min="0" step="100" required value="5000">
                                        <span class="currency">CFA</span>
                                    </div>
                                    <small class="form-hint">Price in West African CFA Francs</small>
                                </div>
                                <div class="form-group">
                                    <label for="picture-folder">Folder *</label>
                                    <select id="picture-folder" required>
                                        <option value="">Select a folder</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary btn-block">
                                    <i class="fas fa-save"></i> Save Picture
                                </button>
                                <button type="button" class="btn btn-secondary" id="cancel-picture-edit" style="display: none;">
                                    Cancel Edit
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- Pictures Table -->
                <div class="table-container">
                    <div class="table-header">
                        <h3>All Pictures</h3>
                        <span class="badge" id="pictures-count">0 pictures</span>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Title</th>
                                <th>Folder</th>
                                <th>Price</th>
                                <th>Image</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="pictures-table">
                            <tr>
                                <td colspan="6" style="text-align: center; padding: 3rem; color: #999;">
                                    No pictures added yet. Upload your first picture above.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="admin-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Marwana Bin Mano</h3>
                    <p>Admin Panel v1.0</p>
                    <p>Upload pictures directly from your phone</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Stats</h3>
                    <p><i class="fas fa-folder"></i> Folders: <span id="footer-folders">0</span></p>
                    <p><i class="fas fa-image"></i> Pictures: <span id="footer-pictures">0</span></p>
                </div>
                <div class="footer-section">
                    <h3>Support</h3>
                    <p>For help, contact:</p>
                    <p><i class="fas fa-envelope"></i> admin@marwanabinmano.com</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Marwana Bin Mano. All rights reserved.</p>
                <p class="version">Version: 1.0.0 | Last Updated: <span id="current-date"></span></p>
            </div>
        </div>
    </footer>

    <!-- Upload Guide Modal -->
    <div id="upload-guide-modal" class="modal">
        <div class="modal-content modal-md">
            <div class="modal-header">
                <h3><i class="fas fa-mobile-alt"></i> Mobile Upload Guide</h3>
                <button class="close-btn" id="close-upload-guide">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="guide-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Tap the Upload Area</h4>
                        <p>Click the blue upload box or "Select from Phone" button</p>
                    </div>
                </div>
                <div class="guide-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Choose Image Source</h4>
                        <p>Select "Camera" to take a new photo or "Gallery" to choose existing</p>
                    </div>
                </div>
                <div class="guide-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Preview & Complete Form</h4>
                        <p>Add title, description, price in CFA and select folder</p>
                    </div>
                </div>
                <div class="guide-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Save Picture</h4>
                        <p>Click "Save Picture" to add to your gallery</p>
                    </div>
                </div>
                <div class="guide-tips">
                    <h4><i class="fas fa-lightbulb"></i> Pro Tips:</h4>
                    <ul>
                        <li>Use high-quality images for best results</li>
                        <li>Add descriptive titles and detailed descriptions</li>
                        <li>Organize pictures into appropriate folders</li>
                        <li>Set competitive prices in CFA</li>
                    </ul>
                </div>
                <button class="btn btn-primary btn-block" id="got-it-btn">
                    <i class="fas fa-check-circle"></i> Got it, let's upload!
                </button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-confirm-modal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3><i class="fas fa-exclamation-triangle"></i> Confirm Delete</h3>
            </div>
            <div class="modal-body">
                <p id="delete-message">Are you sure you want to delete this item?</p>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="cancel-delete">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                    <button class="btn btn-danger" id="confirm-delete">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Initialize current date in footer
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            document.getElementById('current-date').textContent = now.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // Make sure admin dashboard loads
            if (window.location.pathname.includes('admin.html')) {
                // Check if user is logged in
                const currentUser = localStorage.getItem('currentUser');
                if (!currentUser) {
                    window.location.href = 'index.html';
                } else {
                    // Show admin dashboard
                    if (typeof showAdminDashboard === 'function') {
                        showAdminDashboard();
                    }
                }
            }
            
            // Add event listeners for cancel buttons
            document.getElementById('cancel-folder-edit')?.addEventListener('click', function() {
                document.getElementById('folder-form').reset();
                document.getElementById('folder-id').value = '';
                document.getElementById('folder-form-title').textContent = 'Add New Folder';
                this.style.display = 'none';
                document.getElementById('icon-preview').className = 'fas fa-folder';
            });
            
            document.getElementById('cancel-picture-edit')?.addEventListener('click', function() {
                document.getElementById('picture-form').reset();
                document.getElementById('picture-id').value = '';
                document.getElementById('picture-price').value = '5000';
                document.getElementById('picture-form-title').textContent = 'Add New Picture';
                resetFilePreview();
                this.style.display = 'none';
            });
            
            // Icon preview
            const iconInput = document.getElementById('folder-icon');
            const iconPreview = document.getElementById('icon-preview');
            
            if (iconInput && iconPreview) {
                iconInput.addEventListener('input', function() {
                    try {
                        iconPreview.className = this.value || 'fas fa-folder';
                    } catch (e) {
                        iconPreview.className = 'fas fa-folder';
                    }
                });
            }
            
            // Upload guide modal
            const uploadGuideBtn = document.getElementById('upload-guide-btn');
            const closeUploadGuideBtn = document.getElementById('close-upload-guide');
            const gotItBtn = document.getElementById('got-it-btn');
            const uploadGuideModal = document.getElementById('upload-guide-modal');
            
            if (uploadGuideBtn) {
                uploadGuideBtn.addEventListener('click', function() {
                    uploadGuideModal.style.display = 'flex';
                });
            }
            
            if (closeUploadGuideBtn) {
                closeUploadGuideBtn.addEventListener('click', function() {
                    uploadGuideModal.style.display = 'none';
                });
            }
            
            if (gotItBtn) {
                gotItBtn.addEventListener('click', function() {
                    uploadGuideModal.style.display = 'none';
                });
            }
            
            // Close modals when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target === uploadGuideModal) {
                    uploadGuideModal.style.display = 'none';
                }
                
                const deleteModal = document.getElementById('delete-confirm-modal');
                if (event.target === deleteModal) {
                    deleteModal.style.display = 'none';
                }
            });
            
            // Delete confirmation modal functions
            window.confirmDelete = function(type, id, name) {
                const modal = document.getElementById('delete-confirm-modal');
                const message = document.getElementById('delete-message');
                const confirmBtn = document.getElementById('confirm-delete');
                const cancelBtn = document.getElementById('cancel-delete');
                
                if (type === 'folder') {
                    message.textContent = `Are you sure you want to delete the folder "${name}"? All pictures in this folder will also be deleted.`;
                    confirmBtn.onclick = function() {
                        if (typeof deleteFolder === 'function') {
                            deleteFolder(id);
                        }
                        modal.style.display = 'none';
                    };
                } else if (type === 'picture') {
                    message.textContent = `Are you sure you want to delete the picture "${name}"?`;
                    confirmBtn.onclick = function() {
                        if (typeof deletePicture === 'function') {
                            deletePicture(id);
                        }
                        modal.style.display = 'none';
                    };
                }
                
                cancelBtn.onclick = function() {
                    modal.style.display = 'none';
                };
                
                modal.style.display = 'flex';
            };
        });
        
        // Helper function for file preview
        function resetFilePreview() {
            const preview = document.getElementById('image-preview');
            if (preview) {
                preview.innerHTML = `
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <div class="upload-text">
                        <p>Click or tap to select image</p>
                        <small>Supports JPG, PNG, GIF, WebP (Max 10MB)</small>
                    </div>
                    <div class="upload-hint">
                        <i class="fas fa-mobile-alt"></i> Works great on mobile!
                    </div>
                `;
            }
        }
    </script>
</body>
</html>
